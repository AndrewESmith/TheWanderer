<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sound Path Test</title>
  </head>
  <body>
    <h1>Sound Path Test</h1>
    <div id="results"></div>

    <script>
      const soundPaths = [
        "/sounds/player/walk.mp3",
        "/sounds/player/dig.mp3",
        "/sounds/boulder/Whoosh.mp3",
        "/sounds/arrow/twang.mp3",
        "/sounds/arrow/thud.mp3",
        "/sounds/environment/door-slam.mp3",
        "/sounds/diamond/collect.mp3",
      ];

      const results = document.getElementById("results");

      async function testSoundPaths() {
        results.innerHTML = "<h2>Testing sound file accessibility...</h2>";

        for (const path of soundPaths) {
          try {
            const response = await fetch(path);
            const status = response.ok ? "✅" : "❌";
            const statusText = response.ok
              ? "OK"
              : `${response.status} ${response.statusText}`;

            results.innerHTML += `<p>${status} ${path} - ${statusText}</p>`;

            if (response.ok) {
              const contentType = response.headers.get("content-type");
              const contentLength = response.headers.get("content-length");
              results.innerHTML += `<p style="margin-left: 20px; color: #666;">Type: ${contentType}, Size: ${contentLength} bytes</p>`;
            }
          } catch (error) {
            results.innerHTML += `<p>❌ ${path} - Network Error: ${error.message}</p>`;
          }
        }

        results.innerHTML += "<h2>Testing AudioContext creation...</h2>";

        try {
          const AudioContextClass =
            window.AudioContext || window.webkitAudioContext;
          if (!AudioContextClass) {
            results.innerHTML += "<p>❌ Web Audio API not supported</p>";
            return;
          }

          const audioContext = new AudioContextClass();
          results.innerHTML += `<p>✅ AudioContext created - State: ${audioContext.state}</p>`;

          if (audioContext.state === "suspended") {
            results.innerHTML +=
              "<p>⚠️ AudioContext is suspended - click anywhere to resume</p>";

            document.addEventListener(
              "click",
              async () => {
                try {
                  await audioContext.resume();
                  results.innerHTML += `<p>✅ AudioContext resumed - State: ${audioContext.state}</p>`;
                } catch (error) {
                  results.innerHTML += `<p>❌ Failed to resume AudioContext: ${error.message}</p>`;
                }
              },
              { once: true }
            );
          }
        } catch (error) {
          results.innerHTML += `<p>❌ AudioContext creation failed: ${error.message}</p>`;
        }
      }

      testSoundPaths();
    </script>
  </body>
</html>
