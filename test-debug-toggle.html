<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Debug Toggle Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background-color: #1a1a1a;
        color: white;
      }
      .test-result {
        margin: 10px 0;
        padding: 10px;
        border-radius: 4px;
      }
      .pass {
        background-color: #2d5a2d;
        border: 1px solid #4a8a4a;
      }
      .fail {
        background-color: #5a2d2d;
        border: 1px solid #8a4a4a;
      }
    </style>
  </head>
  <body>
    <h1>Audio Debug Toggle Test</h1>
    <div id="test-results"></div>

    <script>
      // Test that the environment check works
      function testEnvironmentCheck() {
        const isDevelopment = process?.env?.NODE_ENV === "development";
        return {
          name: "Environment Check",
          passed: typeof process !== "undefined",
          message: isDevelopment
            ? "Development mode detected"
            : "Production mode or no process.env",
        };
      }

      // Test CSS classes exist
      function testCSSClasses() {
        const style = document.createElement("style");
        style.textContent = `
                .debug-toggle {
                    display: flex;
                    align-items: center;
                    cursor: pointer;
                    user-select: none;
                }
                .debug-toggle input[type="checkbox"] {
                    display: none;
                }
                .toggle-slider {
                    position: relative;
                    width: 50px;
                    height: 24px;
                    background-color: #444;
                    border-radius: 12px;
                    margin-right: 12px;
                    transition: background-color 0.3s;
                }
                .debug-toggle input[type="checkbox"]:checked + .toggle-slider {
                    background-color: #4CAF50;
                }
            `;
        document.head.appendChild(style);

        return {
          name: "CSS Classes",
          passed: true,
          message: "CSS classes for debug toggle added successfully",
        };
      }

      // Test HTML structure
      function testHTMLStructure() {
        const testContainer = document.createElement("div");
        testContainer.innerHTML = `
                <div class="setting-group">
                    <h3>Developer Options</h3>
                    <label class="debug-toggle">
                        <input type="checkbox" id="debug-panel-toggle" />
                        <span class="toggle-slider"></span>
                        Show Audio Debug Panel
                    </label>
                </div>
            `;
        document.body.appendChild(testContainer);

        const checkbox = testContainer.querySelector("#debug-panel-toggle");
        const slider = testContainer.querySelector(".toggle-slider");

        return {
          name: "HTML Structure",
          passed: checkbox && slider,
          message:
            checkbox && slider
              ? "Debug toggle HTML structure created correctly"
              : "Failed to create HTML structure",
        };
      }

      // Run tests
      const tests = [
        testEnvironmentCheck(),
        testCSSClasses(),
        testHTMLStructure(),
      ];

      // Display results
      const resultsContainer = document.getElementById("test-results");
      tests.forEach((test) => {
        const div = document.createElement("div");
        div.className = `test-result ${test.passed ? "pass" : "fail"}`;
        div.innerHTML = `
                <strong>${test.name}:</strong> ${
          test.passed ? "PASS" : "FAIL"
        }<br>
                <em>${test.message}</em>
            `;
        resultsContainer.appendChild(div);
      });

      console.log("Debug Toggle Tests:", tests);
    </script>
  </body>
</html>
